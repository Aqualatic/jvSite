# JVHub (Vercel + Supabase)

Static site that lists songs from the `media/` folder and supports **likes/dislikes + comments** stored in Supabase.

## Setup

### 1. Create tables in Supabase

Run this in the Supabase SQL editor:

```sql
create table if not exists public.ratings (
  song_id text primary key,
  likes integer not null default 0,
  dislikes integer not null default 0
);

create table if not exists public.comments (
  id bigint generated by default as identity primary key,
  song_id text not null,
  author text not null,
  body text not null,
  created_at timestamptz not null default now()
);

create index if not exists comments_song_id_created_at_idx
  on public.comments (song_id, created_at desc);
```

### 2. Configure environment variables

This project reads Supabase via Vercel serverless functions (so secrets never go to the browser).

Set these in Vercel: **Project Settings â†’ Environment Variables**:

- `SUPABASE_URL`
- `SUPABASE_SERVICE_ROLE_KEY` (server-only, never expose)

For local development, copy `.env.example` to `.env.local` and fill them in.

## Local development

To run the site locally with the `api/` endpoints, use the Vercel CLI:

```bash
vercel dev
```

## Notes

- `.env` / `.env.local` are ignored by git (and should not be committed).
- If you ever accidentally committed real Supabase secrets, rotate them in the Supabase dashboard.